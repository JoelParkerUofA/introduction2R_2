<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 dplyr | Introduction 2 R</title>
  <meta name="description" content="This is an intro to R workshop." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 dplyr | Introduction 2 R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an intro to R workshop." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 dplyr | Introduction 2 R" />
  
  <meta name="twitter:description" content="This is an intro to R workshop." />
  

<meta name="author" content="Joel Parker" />


<meta name="date" content="2021-05-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro-to-r-part-ii.html"/>
<link rel="next" href="ggplot2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction To R 2</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> The Prerequisites</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#why-use-r-and-r-studio"><i class="fa fa-check"></i><b>1.1</b> Why use R and R Studio</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#more-coding-and-less-point-and-click"><i class="fa fa-check"></i><b>1.1.1</b> More coding, and less point and click</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#wrote-by-the-people-for-the-people"><i class="fa fa-check"></i><b>1.2</b> Wrote by the people for the people</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-has-a-large-community"><i class="fa fa-check"></i><b>1.3</b> R has a large community</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#r-produces-high-quality-graphics"><i class="fa fa-check"></i><b>1.4</b> R produces high-quality graphics</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#open-source"><i class="fa fa-check"></i><b>1.5</b> Open Source</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installing-r-and-r-studio.html"><a href="installing-r-and-r-studio.html"><i class="fa fa-check"></i><b>2</b> Installing R and R Studio</a><ul>
<li class="chapter" data-level="2.1" data-path="installing-r-and-r-studio.html"><a href="installing-r-and-r-studio.html#installing-r-and-r-studio-1"><i class="fa fa-check"></i><b>2.1</b> Installing R and R studio</a></li>
<li class="chapter" data-level="2.2" data-path="installing-r-and-r-studio.html"><a href="installing-r-and-r-studio.html#i-already-have-r-and-rstudio-installed."><i class="fa fa-check"></i><b>2.2</b> I already have R and RStudio installed.</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro-to-r-part-ii.html"><a href="intro-to-r-part-ii.html"><i class="fa fa-check"></i><b>3</b> Intro to R Part II</a><ul>
<li class="chapter" data-level="3.1" data-path="intro-to-r-part-ii.html"><a href="intro-to-r-part-ii.html#install-tidyverse"><i class="fa fa-check"></i><b>3.1</b> Install tidyverse</a></li>
<li class="chapter" data-level="3.2" data-path="intro-to-r-part-ii.html"><a href="intro-to-r-part-ii.html#loading-data"><i class="fa fa-check"></i><b>3.2</b> Loading Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>4</b> dplyr</a><ul>
<li class="chapter" data-level="4.1" data-path="dplyr.html"><a href="dplyr.html#batting-data."><i class="fa fa-check"></i><b>4.1</b> Batting data.</a></li>
<li class="chapter" data-level="4.2" data-path="dplyr.html"><a href="dplyr.html#filter"><i class="fa fa-check"></i><b>4.2</b> filter</a><ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr.html"><a href="dplyr.html#challenge"><i class="fa fa-check"></i><b>4.2.1</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr.html"><a href="dplyr.html#group_by"><i class="fa fa-check"></i><b>4.3</b> group_by</a></li>
<li class="chapter" data-level="4.4" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>4.4</b> Mutate</a><ul>
<li class="chapter" data-level="4.4.1" data-path="dplyr.html"><a href="dplyr.html#challenge-1"><i class="fa fa-check"></i><b>4.4.1</b> Challenge</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>5</b> ggplot2</a></li>
<li class="chapter" data-level="6" data-path="q-and-a.html"><a href="q-and-a.html"><i class="fa fa-check"></i><b>6</b> Q and A</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction 2 R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> dplyr</h1>
<p>dplyr has many usefull functions and it is not nessisary to remember all of the functions. Cheat sheets have be created to help us we get stuck. The dplyr cheat sheet can be found here: <a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf</a></p>
<div id="batting-data." class="section level2">
<h2><span class="header-section-number">4.1</span> Batting data.</h2>
<p>The Lahmen database consists of many datasets. For this we will be using the teams data set. You can load this into your enviroment with the data function.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">data</span>(Teams)</a></code></pre></div>
<p>Check your R enviroment. You should see the Teams data loaded. </p>
<p>Use the head function to see the first 10 rows of data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># View the first 10 rows. </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">head</span>(Teams,<span class="dt">n=</span><span class="dv">10</span>)</a></code></pre></div>
<pre><code>##    yearID lgID teamID franchID divID Rank  G Ghome  W  L DivWin WCWin LgWin WSWin   R   AB   H X2B X3B HR BB SO SB CS HBP SF  RA  ER  ERA CG SHO SV IPouts  HA HRA BBA
## 1    1871   NA    BS1      BNA  &lt;NA&gt;    3 31    NA 20 10   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 401 1372 426  70  37  3 60 19 73 16  NA NA 303 109 3.55 22   1  3    828 367   2  42
## 2    1871   NA    CH1      CNA  &lt;NA&gt;    2 28    NA 19  9   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 302 1196 323  52  21 10 60 22 69 21  NA NA 241  77 2.76 25   0  1    753 308   6  28
## 3    1871   NA    CL1      CFC  &lt;NA&gt;    8 29    NA 10 19   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 249 1186 328  35  40  7 26 25 18  8  NA NA 341 116 4.11 23   0  0    762 346  13  53
## 4    1871   NA    FW1      KEK  &lt;NA&gt;    7 19    NA  7 12   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 137  746 178  19   8  2 33  9 16  4  NA NA 243  97 5.17 19   1  0    507 261   5  21
## 5    1871   NA    NY2      NNA  &lt;NA&gt;    5 33    NA 16 17   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 302 1404 403  43  21  1 33 15 46 15  NA NA 313 121 3.72 32   1  0    879 373   7  42
## 6    1871   NA    PH1      PNA  &lt;NA&gt;    1 28    NA 21  7   &lt;NA&gt;  &lt;NA&gt;     Y  &lt;NA&gt; 376 1281 410  66  27  9 46 23 56 12  NA NA 266 137 4.95 27   0  0    747 329   3  53
## 7    1871   NA    RC1      ROK  &lt;NA&gt;    9 25    NA  4 21   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 231 1036 274  44  25  3 38 30 53 10  NA NA 287 108 4.30 23   1  0    678 315   3  34
## 8    1871   NA    TRO      TRO  &lt;NA&gt;    6 29    NA 13 15   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 351 1248 384  51  34  6 49 19 62 24  NA NA 362 153 5.51 28   0  0    750 431   4  75
## 9    1871   NA    WS3      OLY  &lt;NA&gt;    4 32    NA 15 15   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 310 1353 375  54  26  6 48 13 48 13  NA NA 303 137 4.37 32   0  0    846 371   4  45
## 10   1872   NA    BL1      BLC  &lt;NA&gt;    2 58    NA 35 19   &lt;NA&gt;  &lt;NA&gt;     N  &lt;NA&gt; 617 2571 753 106  31 14 29 28 53 18  NA NA 434 166 2.90 48   1  1   1548 573   3  63
##    SOA   E DP    FP                    name                              park attendance BPF PPF teamIDBR teamIDlahman45 teamIDretro
## 1   23 243 24 0.834    Boston Red Stockings               South End Grounds I         NA 103  98      BOS            BS1         BS1
## 2   22 229 16 0.829 Chicago White Stockings           Union Base-Ball Grounds         NA 104 102      CHI            CH1         CH1
## 3   34 234 15 0.818  Cleveland Forest Citys      National Association Grounds         NA  96 100      CLE            CL1         CL1
## 4   17 163  8 0.803    Fort Wayne Kekiongas                    Hamilton Field         NA 101 107      KEK            FW1         FW1
## 5   22 235 14 0.840        New York Mutuals          Union Grounds (Brooklyn)         NA  90  88      NYU            NY2         NY2
## 6   16 194 13 0.845  Philadelphia Athletics          Jefferson Street Grounds         NA 102  98      ATH            PH1         PH1
## 7   16 220 14 0.821   Rockford Forest Citys Agricultural Society Fair Grounds         NA  97  99      ROK            RC1         RC1
## 8   12 198 22 0.845          Troy Haymakers                Haymakers&#39; Grounds         NA 101 100      TRO            TRO         TRO
## 9   13 218 20 0.850     Washington Olympics                  Olympics Grounds         NA  94  98      OLY            WS3         WS3
## 10  77 432 22 0.830      Baltimore Canaries                    Newington Park         NA 106 102      BAL            BL1         BL1</code></pre>
</div>
<div id="filter" class="section level2">
<h2><span class="header-section-number">4.2</span> filter</h2>
<p>Typically we use what are called pipes %&gt;% to edit and manipulate data. We will start by filtering data. Lets say we were only interested in the data that was collected after 1950. We can use the filter function from dplyr to get what we want.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co"># Check the class of the year variable</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">class</span>(Teams<span class="op">$</span>yearID)</a></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># year is stored as an integer so we will need to use integer values to filter. </span></a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co"># data after 1950</span></a>
<a class="sourceLine" id="cb10-6" title="6"></a>
<a class="sourceLine" id="cb10-7" title="7">Teams <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="st">  </span><span class="kw">filter</span>(yearID <span class="op">&gt;</span><span class="st"> </span><span class="dv">1950</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##   yearID lgID teamID franchID divID Rank   G Ghome  W  L DivWin WCWin LgWin WSWin   R   AB    H X2B X3B  HR  BB  SO SB CS HBP SF  RA  ER  ERA CG SHO SV IPouts   HA
## 1   1951   AL    BOS      BOS  &lt;NA&gt;    3 154    75 87 67   &lt;NA&gt;  &lt;NA&gt;     N     N 804 5378 1428 233  32 127 756 594 20 21  NA NA 725 644 4.14 46   7 24   4197 1413
## 2   1951   NL    BRO      LAD  &lt;NA&gt;    2 158    78 97 60   &lt;NA&gt;  &lt;NA&gt;     N     N 855 5492 1511 249  37 184 603 649 89 70  NA NA 672 613 3.88 64  10 13   4269 1360
## 3   1951   NL    BSN      ATL  &lt;NA&gt;    4 155    78 76 78   &lt;NA&gt;  &lt;NA&gt;     N     N 723 5293 1385 234  37 130 565 617 80 34  NA NA 662 579 3.75 73  16 12   4167 1378
## 4   1951   AL    CHA      CHW  &lt;NA&gt;    4 155    78 81 73   &lt;NA&gt;  &lt;NA&gt;     N     N 714 5378 1453 229  64  86 596 524 99 70  NA NA 644 551 3.50 74  11 14   4254 1353
## 5   1951   NL    CHN      CHC  &lt;NA&gt;    8 155    77 62 92   &lt;NA&gt;  &lt;NA&gt;     N     N 614 5307 1327 200  47 103 477 647 63 30  NA NA 750 668 4.34 48  10 10   4155 1416
## 6   1951   NL    CIN      CIN  &lt;NA&gt;    6 155    77 68 86   &lt;NA&gt;  &lt;NA&gt;     N     N 559 5285 1309 215  33  88 415 577 44 40  NA NA 667 571 3.70 55  14 23   4170 1357
##   HRA BBA SOA   E  DP    FP              name           park attendance BPF PPF teamIDBR teamIDlahman45 teamIDretro
## 1 100 599 658 138 184 0.977    Boston Red Sox Fenway Park II    1312282 110 109      BOS            BOS         BOS
## 2 150 549 693 128 192 0.979  Brooklyn Dodgers   Ebbets Field    1282628 102  99      BRO            BRO         BRO
## 3  96 595 604 145 157 0.976     Boston Braves   Braves Field     487475  93  93      BSN            BSN         BSN
## 4 109 549 572 151 176 0.975 Chicago White Sox  Comiskey Park    1328234  98  98      CHW            CHA         CHA
## 5 125 572 544 181 161 0.971      Chicago Cubs  Wrigley Field     894415 102 104      CHC            CHN         CHN
## 6 119 490 584 140 141 0.977   Cincinnati Reds  Crosley Field     588268 101 103      CIN            CIN         CIN</code></pre>
<p>You can use the &amp; or | opperators if multiple conditions need to be met. Lets use the filter functions to meet the following conditions</p>
<ul>
<li>yearID after 1950</li>
<li>franchID is equal to BOS (Boston)</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co">## Filter with multiple conditions. </span></a>
<a class="sourceLine" id="cb12-2" title="2">Teams <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span><span class="kw">filter</span>(yearID <span class="op">&gt;</span><span class="st"> </span><span class="dv">1950</span> <span class="op">&amp;</span><span class="st"> </span>franchID <span class="op">==</span><span class="st">&quot;BOS&quot;</span> ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##   yearID lgID teamID franchID divID Rank   G Ghome  W  L DivWin WCWin LgWin WSWin   R   AB    H X2B X3B  HR  BB  SO SB CS HBP SF  RA  ER  ERA CG SHO SV IPouts   HA
## 1   1951   AL    BOS      BOS  &lt;NA&gt;    3 154    75 87 67   &lt;NA&gt;  &lt;NA&gt;     N     N 804 5378 1428 233  32 127 756 594 20 21  NA NA 725 644 4.14 46   7 24   4197 1413
## 2   1952   AL    BOS      BOS  &lt;NA&gt;    6 154    77 76 78   &lt;NA&gt;  &lt;NA&gt;     N     N 668 5246 1338 233  34 113 542 739 59 47  NA NA 658 579 3.80 53   7 24   4116 1332
## 3   1953   AL    BOS      BOS  &lt;NA&gt;    4 153    76 84 69   &lt;NA&gt;  &lt;NA&gt;     N     N 656 5246 1385 255  37 101 496 601 33 45  NA NA 632 546 3.58 41  15 37   4119 1333
## 4   1954   AL    BOS      BOS  &lt;NA&gt;    4 156    79 69 85   &lt;NA&gt;  &lt;NA&gt;     N     N 700 5399 1436 244  41 123 654 660 51 30  NA NA 728 629 4.01 41  10 22   4236 1434
## 5   1955   AL    BOS      BOS  &lt;NA&gt;    4 154    78 84 70   &lt;NA&gt;  &lt;NA&gt;     N     N 755 5273 1392 241  39 137 707 733 43 17  NA NA 652 572 3.72 44   9 34   4152 1333
## 6   1956   AL    BOS      BOS  &lt;NA&gt;    4 155    78 84 70   &lt;NA&gt;  &lt;NA&gt;     N     N 780 5349 1473 261  45 139 727 687 28 19  NA NA 751 648 4.17 50   8 20   4194 1354
##   HRA BBA SOA   E  DP    FP           name           park attendance BPF PPF teamIDBR teamIDlahman45 teamIDretro
## 1 100 599 658 138 184 0.977 Boston Red Sox Fenway Park II    1312282 110 109      BOS            BOS         BOS
## 2 107 623 624 143 181 0.976 Boston Red Sox Fenway Park II    1115750 108 107      BOS            BOS         BOS
## 3  92 584 642 147 173 0.976 Boston Red Sox Fenway Park II    1026133 105 105      BOS            BOS         BOS
## 4 118 612 707 176 163 0.972 Boston Red Sox Fenway Park II     931127 111 110      BOS            BOS         BOS
## 5 128 582 674 136 140 0.977 Boston Red Sox Fenway Park II    1203200 110 109      BOS            BOS         BOS
## 6 130 668 712 169 168 0.972 Boston Red Sox Fenway Park II    1137158 113 111      BOS            BOS         BOS</code></pre>
<ul>
<li>yearID after 1950</li>
<li>franchID is equal to BOS (Boston) or LAD (Los Angelas Dodgers).</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co">## Filter with multiple conditions. </span></a>
<a class="sourceLine" id="cb14-2" title="2">Teams <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">  </span><span class="kw">filter</span>(yearID <span class="op">&gt;</span><span class="st"> </span><span class="dv">1950</span> <span class="op">&amp;</span><span class="st"> </span>(franchID <span class="op">==</span><span class="st">&quot;BOS&quot;</span> <span class="op">|</span><span class="st"> </span>franchID<span class="op">==</span><span class="st">&quot;LAD&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##   yearID lgID teamID franchID divID Rank   G Ghome   W  L DivWin WCWin LgWin WSWin   R   AB    H X2B X3B  HR  BB  SO SB CS HBP SF  RA  ER  ERA CG SHO SV IPouts   HA
## 1   1951   AL    BOS      BOS  &lt;NA&gt;    3 154    75  87 67   &lt;NA&gt;  &lt;NA&gt;     N     N 804 5378 1428 233  32 127 756 594 20 21  NA NA 725 644 4.14 46   7 24   4197 1413
## 2   1951   NL    BRO      LAD  &lt;NA&gt;    2 158    78  97 60   &lt;NA&gt;  &lt;NA&gt;     N     N 855 5492 1511 249  37 184 603 649 89 70  NA NA 672 613 3.88 64  10 13   4269 1360
## 3   1952   AL    BOS      BOS  &lt;NA&gt;    6 154    77  76 78   &lt;NA&gt;  &lt;NA&gt;     N     N 668 5246 1338 233  34 113 542 739 59 47  NA NA 658 579 3.80 53   7 24   4116 1332
## 4   1952   NL    BRO      LAD  &lt;NA&gt;    1 155    80  96 57   &lt;NA&gt;  &lt;NA&gt;     Y     N 775 5266 1380 199  32 153 663 699 90 49  NA NA 603 549 3.53 45  11 24   4197 1295
## 5   1953   AL    BOS      BOS  &lt;NA&gt;    4 153    76  84 69   &lt;NA&gt;  &lt;NA&gt;     N     N 656 5246 1385 255  37 101 496 601 33 45  NA NA 632 546 3.58 41  15 37   4119 1333
## 6   1953   NL    BRO      LAD  &lt;NA&gt;    1 155    78 105 49   &lt;NA&gt;  &lt;NA&gt;     Y     N 955 5373 1529 274  59 208 655 686 90 47  NA NA 689 629 4.10 51  11 29   4140 1337
##   HRA BBA SOA   E  DP    FP             name           park attendance BPF PPF teamIDBR teamIDlahman45 teamIDretro
## 1 100 599 658 138 184 0.977   Boston Red Sox Fenway Park II    1312282 110 109      BOS            BOS         BOS
## 2 150 549 693 128 192 0.979 Brooklyn Dodgers   Ebbets Field    1282628 102  99      BRO            BRO         BRO
## 3 107 623 624 143 181 0.976   Boston Red Sox Fenway Park II    1115750 108 107      BOS            BOS         BOS
## 4 121 544 773 105 169 0.982 Brooklyn Dodgers   Ebbets Field    1088704 102  98      BRO            BRO         BRO
## 5  92 584 642 147 173 0.976   Boston Red Sox Fenway Park II    1026133 105 105      BOS            BOS         BOS
## 6 169 509 817 118 161 0.980 Brooklyn Dodgers   Ebbets Field    1163419 103 100      BRO            BRO         BRO</code></pre>
<div id="challenge" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Challenge</h3>
<p>Use the teams data and the filter function to meet the following criteria.</p>
<ul>
<li>yearID greater than 1900</li>
<li>franchID equal to “LAD”, “STL” or “MIN”</li>
<li>save this dataframe as plot.data.</li>
</ul>
<p>Hint:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">plot.data &lt;-<span class="st"> </span>Teams <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="st">  </span><span class="kw">filter</span>()</a></code></pre></div>
</div>
</div>
<div id="group_by" class="section level2">
<h2><span class="header-section-number">4.3</span> group_by</h2>
<p>Somtimes your data may be in different groups. Lets say we are interested in how many games per year each franchise wins. We can use group_by and Summary.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="co">## Summarise wins per year for each team.</span></a>
<a class="sourceLine" id="cb17-2" title="2">Teams <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(franchID) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">wins_per_year =</span> <span class="kw">mean</span>(W)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   franchID wins_per_year
##   &lt;fct&gt;            &lt;dbl&gt;
## 1 ALT                6  
## 2 ANA               78.9
## 3 ARI               77.7
## 4 ATH               14  
## 5 ATL               74.0
## 6 BAL               73.3</code></pre>
</div>
<div id="mutate" class="section level2">
<h2><span class="header-section-number">4.4</span> Mutate</h2>
<p>Many times it is nessisary to create new variables or manipulate old ones. You can use the mutate function to do this. </p>
<ul>
<li>Lets create create a new variable call win_percentage</li>
<li>Also use the select function to only look at the yearID,franchID,W,G and win_percentage</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">Teams <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">win_percentage =</span> W<span class="op">/</span>G) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="st">  </span><span class="kw">select</span>(yearID,franchID,W,G,win_percentage) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="st">  </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>##   yearID franchID  W  G win_percentage
## 1   1871      BNA 20 31      0.6451613
## 2   1871      CNA 19 28      0.6785714
## 3   1871      CFC 10 29      0.3448276
## 4   1871      KEK  7 19      0.3684211
## 5   1871      NNA 16 33      0.4848485
## 6   1871      PNA 21 28      0.7500000</code></pre>
<div id="challenge-1" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Challenge</h3>
<p>USing the plot.data data created in the previous challenge. Use the mutate function to create the following variables</p>
<ul>
<li>Team: MIN for franchID== Min, LAD for franchID==“LAD” and STL for franchID==“STL”</li>
<li>RunsPerGame: R/G</li>
<li>HitsPerGame: HA/G</li>
</ul>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-to-r-part-ii.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JoelParkerUofA/Introduction2R_2/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/JoelParkerUofA/Introduction2R_2/blob/master/index.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
